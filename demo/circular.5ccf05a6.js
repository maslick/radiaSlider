!function(){function e(e){return e&&e.__esModule?e.default:e}var t={};!function(){class e{constructor(t){this.sliders={},this.scaleWidth=34,this.fillWidth=35,this.knobWidth=35,this.startAngle=1.5*Math.PI+1e-6,this.endAngle=1.5*Math.PI-1e-6,this.continuousMode=t.continuousMode||!1,this.container=document.getElementById(t.canvasId),this.the_body=document.body,this.context=e.setupHiDpiCanvas(this.container),this.x0=void 0===t.x0?this.container.width/2:t.x0,this.y0=void 0===t.y0?this.container.height/2:t.y0,this.x0/=window.devicePixelRatio||1,this.y0/=window.devicePixelRatio||1,this.MouseX=0,this.MouseY=0,this.selectedSlider=null,this.currentSlider=null,this.readOnly=t.readOnly||!1,this.readOnly||(this.rotationEventListener=this._rotation.bind(this),this.container.addEventListener("mousedown",this._handleMouseDown.bind(this),!1),this.the_body.addEventListener("mouseup",this._handleMouseUp.bind(this),!1),this.container.addEventListener("click",this._handleClick.bind(this),!1),this.container.addEventListener("touchstart",this._handleTouch.bind(this),!1),this.container.addEventListener("touchmove",this._handleMove.bind(this),!1),this.container.addEventListener("touchend",this._handleEnd.bind(this),!1))}static setupHiDpiCanvas(e){let t=e.getContext("2d"),i=window.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,n=i/s;if(i!==s){let i=e.width,s=e.height;e.width=i*n,e.height=s*n,e.style.width=i+"px",e.style.height=s+"px",t.scale(n,n)}return t}addSlider(e){this.sliders[e.id]={id:e.id,container:document.getElementById(e.container),color:e.color||"#104b63",min:e.min||0,max:e.max||100,radius:e.radius||100,startAngle:this.startAngle,endAngle:this.endAngle,onValueChangeCallback:e.changed||function(e){},ang_degrees:0,normalizedValue:e.min||0,step:e.step||1};const t=this.sliders[e.id];this.setSliderValue(t.id,e.min)}setSliderValue(t,i){const s=this.sliders[t];i<=s.min?(s.endAngle=this.startAngle,s.ang_degrees=0,s.normalizedValue=0):i>=s.max?(s.endAngle=this.endAngle,s.ang_degrees=360,s.normalizedValue=s.max):(s.endAngle=2*Math.PI*(i-s.min)/(s.max-s.min)-Math.PI/2,s.ang_degrees=e.radToDeg(e.normalizeTan(s.endAngle)),s.normalizedValue=i),this.drawAll()}drawAll(){this.context.clearRect(0,0,this.container.width,this.container.height);for(let e in this.sliders){if(!this.sliders.hasOwnProperty(e))continue;const t=this.sliders[e];this.drawScale(t),this.drawData(t),this.drawArrow(t),this.drawKnob(t),t.onValueChangeCallback({rad:t.endAngle,deg:t.ang_degrees,value:t.normalizedValue})}this.drawCenterDot()}drawScale(e){for(let t=0;t<=2*Math.PI;t+=Math.PI/6)this.context.beginPath(),this.context.strokeStyle="#eeeeee",this.context.arc(this.x0,this.y0,e.radius,t,t+Math.PI/4,!1),this.context.lineWidth=this.scaleWidth,this.context.stroke()}drawCenterDot(){this.context.beginPath(),this.context.strokeStyle="#eeeeee",this.context.arc(this.x0,this.y0,this.scaleWidth/2,0,2*Math.PI,!1),this.context.lineWidth=1,this.context.fillStyle="#eeeeee",this.context.fill()}drawData(e){this.context.beginPath(),this.context.strokeStyle=e.color,this.context.arc(this.x0,this.y0,e.radius,e.startAngle,e.endAngle,!1),this.context.lineWidth=this.fillWidth,this.context.stroke()}drawArrow(e){this.context.beginPath(),this.context.moveTo(this.x0,this.y0-e.radius+this.scaleWidth/2),this.context.lineTo(this.x0,this.y0-this.scaleWidth-e.radius+this.scaleWidth/2),this.context.lineTo(this.x0+this.scaleWidth/4,this.y0-this.scaleWidth/2-e.radius+this.scaleWidth/2),this.context.fillStyle="#eeeeee",this.context.fill()}drawKnob(e){this.context.beginPath(),this.context.strokeStyle="#eb879c",this.context.arc(Math.cos(e.endAngle)*e.radius+this.x0,Math.sin(e.endAngle)*e.radius+this.y0,this.knobWidth/2,0,2*Math.PI,!1),this.context.lineWidth=1,this.context.fillStyle="#eb879c",this.context.fill(),this.context.beginPath(),this.context.strokeStyle="yellow",this.context.arc(Math.cos(e.endAngle)*e.radius+this.x0,Math.sin(e.endAngle)*e.radius+this.y0,this.scaleWidth/10,0,2*Math.PI,!1),this.context.lineWidth=1,this.context.fillStyle="yellow",this.context.fill()}calculateAngles(t,i){if(!this.selectedSlider)return;let s=this.selectedSlider.max,n=this.selectedSlider.min,d=this.selectedSlider.step,l=Math.atan2(i-this.y0,t-this.x0),h=e.radToDeg(e.normalizeTan(l)),a=e.normalizeTan(l)*(s-n)/(2*Math.PI)+n;a=(a/d>>0)*d,this.selectedSlider.endAngle=l,this.selectedSlider.ang_degrees=h,this.selectedSlider.normalizedValue=a}static radToDeg(e){return 180*e/Math.PI}static normalizeTan(e){return e+Math.PI/2>0?e+Math.PI/2:2*Math.PI+e+Math.PI/2}calculateUserCursor(){const e=this.container.getBoundingClientRect();event.touches?(this.MouseX=event.touches[0].clientX-e.left,this.MouseY=event.touches[0].clientY-e.top):(this.MouseX=event.clientX-e.left,this.MouseY=event.clientY-e.top)}getSelectedSlider(){this.calculateUserCursor();const e=Math.sqrt(Math.pow(this.MouseX-this.x0,2)+Math.pow(this.MouseY-this.y0,2));let t;for(let i in this.sliders){if(!this.sliders.hasOwnProperty(i))continue;const s=this.sliders[i];if(Math.abs(e-s.radius)<=this.scaleWidth/2){t=s;break}}return t||null}_handleMouseDown(e){e.preventDefault(),this.selectedSlider=this.getSelectedSlider(),this.selectedSlider&&this.the_body.addEventListener("mousemove",this.rotationEventListener,!1)}_handleMouseUp(e){e.preventDefault(),this.the_body.removeEventListener("mousemove",this.rotationEventListener,!1),this.currentSlider=this.selectedSlider}_handleClick(e){this.selectedSlider=this.getSelectedSlider(),this.currentSlider&&this.getSelectedSlider()&&this.currentSlider.id!==this.getSelectedSlider().id||this.selectedSlider&&this._rotation()}_handleTouch(e){e.preventDefault(),this.selectedSlider=this.getSelectedSlider(),this.selectedSlider&&this._rotation()}_handleMove(e){e.preventDefault(),(this.continuousMode||this.selectedSlider)&&this._rotation()}_handleEnd(e){e.preventDefault(),this.the_body.removeEventListener("mousemove",this.rotationEventListener,!1)}_rotation(){this.calculateUserCursor(),this.continuousMode&&(this.selectedSlider=this.getSelectedSlider()),this.calculateAngles(this.MouseX,this.MouseY),this.drawAll()}}void 0!==t?t=e:window.Slider=e}();var i=e(t),s=new i({canvasId:"myCanvas",continuousMode:!0});s.addSlider({id:1,radius:50,min:-50,max:50,color:"#104b63",step:1,changed:function(e){document.getElementById("value1").innerHTML="Angle: "+e.deg.toFixed(2)+" deg, value: "+e.value.toFixed(2)}}),s.setSliderValue(1,34),s.addSlider({id:2,radius:90,min:-100,max:100,color:"#ff9a9a",step:5,changed:function(e){document.getElementById("value2").innerHTML="Angle: "+e.deg.toFixed(2)+" deg, value: "+e.value.toFixed(2)}}),s.setSliderValue(2,70),s.addSlider({id:3,radius:130,min:0,max:360,color:"#76c7e9",step:.1,changed:function(e){document.getElementById("value3").innerHTML="Angle: "+e.deg.toFixed(2)+" deg, value: "+e.value.toFixed(2)}}),s.setSliderValue(3,307);var n=new i({canvasId:"myCanvas2"});n.addSlider({id:1,radius:90,min:0,max:30,step:3,color:"#76c7e9",changed:function(e){document.getElementById("value4").innerHTML="Angle: "+e.deg.toFixed(2)+" deg, value: "+e.value.toFixed(2)}}),n.addSlider({id:3,radius:130,min:-1,max:1,step:.2,color:"#ff9a9a",changed:function(e){document.getElementById("value5").innerHTML="Angle: "+e.deg.toFixed(2)+" deg, value: "+e.value.toFixed(2)}})}();
//# sourceMappingURL=circular.5ccf05a6.js.map
